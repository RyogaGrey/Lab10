# otpro10  
OTPRO Labs  

## Лабораторная работа №10: Time Series база данных Prometheus  

### Описание  
Программа собирает данные о загрузке процессоров, использовании памяти и дискового пространства. Эти данные экспортируются в Prometheus для последующего анализа и построения графиков.  

### Метрики  
- **CPU**: процент загрузки каждого ядра.  
- **Память**: общий объем и объем используемой оперативной памяти.  
- **Диски**: общий объем и объем занятого пространства.  

Все метрики доступны на корневом пути `/` в формате, совместимом с Prometheus.  

### Примеры запросов PromQL  
1. **Средняя загрузка CPU по всем ядрам**:  
   ```
   avg(cpu_usage_percent) by (core)
   ```  

2. **Процент использования памяти**:  
   ```
   (memory_used_bytes / memory_total_bytes) * 100
   ```  

3. **Процент использования дискового пространства**:  
   ```
   avg(disk_used_bytes) by (device) / avg(disk_total_bytes) by (device) * 100
   ```  

### Инструкция по запуску  
1. Склонируйте проект:  
   ```
   git clone https://github.com/LizzBizzLol/otpro10.git
   cd otpro10
   ```  
2. Установите зависимости:  
   ```
   pip install -r requirements.txt
   ```  
3. Запустите экспортёр:  
   ```
   python exporter.py
   ```  
   По умолчанию приложение доступно на `http://127.0.0.1:8000`.  

### Настройка Prometheus  
1. Добавьте в `prometheus.yml` следующую конфигурацию:  
   ```yaml
   scrape_configs:
     - job_name: "exporter"
       static_configs:
         - targets: ["127.0.0.1:8000"]
   ```  
2. Запустите Prometheus:  
   ```
   prometheus --config.file=prometheus.yml
   ```  

### Результаты  
- Экспортёр успешно собирает и передает данные в Prometheus.  
- Метрики доступны для анализа и визуализации.  